{% extends "CoobixAdminBundle:Default:edit.html.twig" %}

{% block breadcrumb_in %}

{% endblock breadcrumb_in %} 

{%block main_path%}
<ul>
{#
	<li><a class="btn_back_to_list txt16 txt_green" href="{{ path('cliente_edit',{'id':entity.cliente.id}) }}">Cliente: {{entity.cliente}}</a></li>
	<li> > <a class="btn_back_to_list txt16 txt_green" href="{{ path('pedido_edit',{'id':entity.id}) }}">Pedido: {{entity.numero}}, {{entity.obra}}</a></li>
#}
</ul>
{%endblock main_path%}

{% block module_header%}
		<div class="module_header">
			<div id="tituloContenido" class="module_tit txt3">Resumen del Proceso</div>
			
			
			{% if entity.estado < 1  %}
			<form action="{{ path('proceso_delete', { 'id': entity.id }) }}" method="post">
				{{ form_widget(delete_form) }}
				<button id="pedidoEliminarBtn" class="btn_red_button right" type="submit">Eliminar</button>
			</form>
			{% endif %}
			<a id="pedidoListarBtn" class="btn_blue right" href="{{path('proceso')}}">Ir al listado</a>
		
		</div>
{% endblock module_header%}

{% block form_content %}
		{% block errorMsj %}{% endblock errorMsj %}
		
		<form action="{{ path('proceso_asignar_update', { 'id': entity.id }) }}" method="post" id="procesoForm" {{ form_enctype(edit_form) }}>
		<div class="formProcesoCont">
		<br>
		<br>	
	
{# Cantidad de productos a producir #}
		{% set totalCantidad = 0 %}
		
		{# Cantidad de Placas a producir #}
		{% set totalCantidadPlacas = 0 %}
		
		{# Cantidad de Molduras a producir #}
		{% set totalCantidadMolduras = 0 %}
		
		{# Cantidad de productos producidos #}
		{% set totalCantidadProducida = 0 %}
			
		{% for pp in procesoProducto %} 
			
			{% set totalCantidad = totalCantidad + pp.cantidad %}
			{% set totalCantidadProducida = totalCantidadProducida + pp.cantidadProducida %}
			
			{% if (pp.getProducto.getTipo == 0) %}
				{% set totalCantidadPlacas = totalCantidadPlacas + pp.cantidad %}
			{% endif %}
			
			{% if (pp.getProducto.getTipo == 1) %}
				{% set totalCantidadMolduras = totalCantidadMolduras + pp.cantidad %}
			{% endif %}
		
		{% endfor %} 
		
		{% set datos = {
		'totalCantidad': totalCantidad,
		'totalCantidadPlacas': totalCantidadPlacas, 
		'totalCantidadMolduras': totalCantidadMolduras,
		'totalCantidadProducida': totalCantidadProducida,
		'entity': entity
		 
} %}
		
		<div class="fix"><br><br><br></div>
		
		
		
		
		{# CUADRO DATOS PROCESO #}
		{% include 'DecoyesoProduccionBundle:Proceso:cuadro_datos_proceso.html.twig' with {'datos': datos} %}
		{# CUADRO DATOS PROCESO #}
		

		
		{# CUADRO DATOS DE PRODUCTOS A INGRESAR #}
		<table id="tablaItems" class="NTablaItemsProceso">
			<tr>
				<td  colspan="3" align="center" class=" txt3 ">RESUMEN DE PRODUCTOS QUE INGRESAN A STOCK</td>
			</tr>
						
			<tr>
				<td class=" txt3 ">PRODUCTO</td>
				<td align="center" class=" txt3 ">FABRICADOS</td>
				<td align="center" class=" txt3 " >INGRESAN A STOCK</td>
			</tr>
			
		
			{% for pp in procesoProducto %} 
			<tr class="NItemsTr" id="NItemsTr">
			
				<td class="">{{ pp.producto.nombre }}</td>
				
				<td align="center" class="">{{ pp.cantidad }}</td>
				
				<td align="center" class="">
					<input type="text" name="cantidadIngresada_{{ pp.producto.id }}" id="cantidadIngresada_{{ pp.producto.id }}" class="inputCorto inputCantidadProducida" value="{{ pp.cantidad }}">
				</td>
			</tr>
			{% endfor %}
			
		</table>
		<div class="fix"><br></div>
		{# CUADRO DATOS DE PRODUCTOS A INGRESAR #}

		
			<input type="hidden" name="numFilas" id="numFilas" value="0">
	

	
	

	</div>	
		
		<div class="fix"></div>
		<p>

			<button class="btn_green_button right" type="submit">LISTO</button>
		</p>
		
		<div class="fix"></div>
		
		</form>
		{% endblock form_content %}

{% block list_path %}{{ path('proceso') }}{% endblock list_path %}

{% block javascript_extra %}

{% endblock javascript_extra %}