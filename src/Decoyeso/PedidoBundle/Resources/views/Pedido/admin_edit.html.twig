{% extends "CoobixAdminBundle:Default:edit.html.twig" %}
{% import "PedidoBundle:Pedido:macros.html.twig" as macrosPedido %}

{%block main_path%}
<ul>
	<li><a class="btn_back_to_list txt16 txt_green" href="{{ path('cliente_edit',{'id':entity.cliente.id}) }}">Cliente: {{entity.cliente}}</a></li>
	<li> > <a class="btn_back_to_list txt16 txt_green" href="{{ path('pedido_edit',{'id':entity.id}) }}">Pedido: {{entity.numero}}, {{entity.nombre}}</a></li>
</ul>
{%endblock main_path%}


{% block module_tit %}Editar Pedido{% endblock module_tit %}			
			

{% block delete_path %}
	{{ path('pedido_delete', { 'id': entity.id }) }}
{% endblock delete_path %}

{% block menuAcciones %}
		{{ parent() }}
		<a class="btn_blue right" href="{{path('pedidos_por_cliente',{'cliente':entity.cliente.id})}}">Listar Pedidos del Cliente</a>	
{% endblock menuAcciones %}

{% block menuOpcionesItems %}
	{{ macrosPedido.menuOpciones(entity) }}		
{% endblock menuOpcionesItems %}

{%block opcionesGuia  %}
	{% if (entity.estado ==6 or entity.estado ==8) %}
		<a  href="{{ path('pedido_cambiarEstado',{'id': entity.id,'estado':7}) }}" class="btn_green_button right">Finalizar Pedido</a>
	{% endif %}
	{% if (entity.estado ==7 ) %}
		<a  href="{{ path('pedido_cambiarEstado',{'id': entity.id,'estado':8}) }}" class="btn_green_button right">Reabrir Pedido</a>
	{% endif %}
	
	{{ macrosPedido.guia(entity) }}
	
{%endblock opcionesGuia  %}

{% block form_content %}
	
	<div id="datosPedidoContenido">
			<form action="{% block update_path %}{{ path('pedido_update', { 'id': entity.id }) }}{% endblock update_path %}" method="post" {{ form_enctype(edit_form) }}>
			{% form_theme edit_form 'CoobixAdminBundle:Form:Fields.html.twig' %}
			
				<div id="div_pedido_numero" class="form_row">
					<label for="pedido_numero" class=" required">NÃºmero</label>
					<div>{{entity.numero}}</div>
				</div>
		
				<div id="div_pedido_numero" class="form_row">
					<label for="pedido_numero" class=" required">Estado</label>
					<div>{{entity.estadoNombre}}</div>
				</div>
		
				{{ form_widget(edit_form) }}
				
				
				
				<p>
					<button id="btnGuardarCambios" class="btn_green_button right" type="submit">Guardar cambios</button>
				</p>
				
			</form>
			
			
			
			{% block form_record_actions %}
			<ul class="form_record_actions">
				{%block list_extras%}
					
				{%endblock%}
				
				{% block delete_btn %}
				
				{% endblock delete_btn %}
			</ul>
			{% endblock form_record_actions %}
		
	</div>
{% endblock form_content %}




{% block otros %}

 
{% endblock otros %}

{% block javascript_extra %}

<script type="text/javascript">
	var urlDepartamento="{{url('ubicacion_cargar_departamento')}}";
	var urlLocalidad="{{url('ubicacion_cargar_localidad')}}";
</script>

<script type="text/javascript" src="{{ asset('bundles/pedido/js/pedido.js') }}" /></script>
{% endblock javascript_extra %}
