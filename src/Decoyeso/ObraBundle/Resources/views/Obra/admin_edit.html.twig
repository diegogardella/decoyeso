{% extends "CoobixAdminBundle:Default:edit.html.twig" %}

{% block breadcrumb_in %}
<div class="breadcrumbs">
<a href="{{ path('admin_post_list') }}" class="current" >Obra</a>
<div class="breadcrumb_divider"></div> 
<a href="{{ path('obra_edit', { 'id': entity.id }) }}" class="current" >Editar</a>
</div>
{% endblock breadcrumb_in %} 

{%block main_path%}
<ul>
	<li><a class="btn_back_to_list txt16 txt_green" href="{{ path('cliente_edit',{'id':entity.pedido.cliente.id}) }}">Cliente: {{entity.pedido.cliente}}</a></li>
	<li> > <a class="btn_back_to_list txt16 txt_green" href="{{ path('pedido_edit',{'id':entity.pedido.id}) }}">Pedido: {{entity.pedido.numero}}, {{entity.pedido.nombreObra}}</a></li>
	<li> > <a class="btn_back_to_list txt16 txt_green" href="{{ path('obra_edit',{'id':entity.id}) }}">Obra: {{entity.pedido.nombreObra}}</a></li>
</ul>
{%endblock main_path%}

{% block module_header%}
		<div class="module_header">
			<div id="tituloContenido" class="module_tit txt3">Datos de la Obra</div>
			
			
			
			<form action="{{ path('obra_delete', { 'id': entity.id }) }}" method="post">
				{{ form_widget(delete_form) }}
				<button id="pedidoEliminarBtn" class="btn_red_button right" type="submit">Eliminar</button>
			</form>

			<a id="pedidoListarBtn" class="btn_blue right" href="{{path('obra')}}">Ir al listado</a>
			
			<a id="SolicitudMovimientoCrearBtn"  class="btn_blue right" href="{{path('solicitudmovimiento_new',{'paramPedido':entity.pedido.id})}}">Crear Pedido a Stock</a>
			<a id="solicitudMovimientosBtn" class="btn_blue right" href="javascript:void(0)">Pedidos a Stock</a>
			
			<a id="obraDatosBtn"  class="btn_blue right" href="javascript:void(0)">Datos de la Obra</a>
			
		</div>
{% endblock module_header%}

{% block form_content %}

	<div id="datosObraContenido">	
		<form action="{% block update_path %}{{ path('obra_update', { 'id': entity.id }) }}{% endblock update_path %}" method="post" {{ form_enctype(edit_form) }}>
		{% form_theme edit_form 'CoobixAdminBundle:Form:Fields.html.twig' %}
		
		<div class="form_row">
			<label class=" required" for="cliente_numero">Nombre de Obra</label>
			<div>{{ entity.pedido.nombreObra }}</div>
		</div>
				
		{{ form_widget(edit_form) }}
			<p>
				<button class="btn_green_button right" type="submit">Guardar cambios</button>
			</p>
		</form>
		
		
		
		{% block form_record_actions %}
		
			{% block delete_btn %}
			
			{% endblock delete_btn %}
		
		{% endblock form_record_actions %}

	</div>
		
{% endblock form_content %}

{% block otros %}

	<div id="solicitudMovimientoContenido" style="display:none;">	

		<div class="tab_container border_radius">
		
					<table class="records_list">
		
						<thead>
							<tr>
								<th>Fecha requerido</th>
								<th>Estado</th>
								<th></th>
							</tr>
						</thead>
							
						<tbody>
						{% for solicitudMovimiento in entity.pedido.solicitudMovimiento %}
							<tr>
								<td><a href="{{ path('solicitudmovimiento_show', {'id':solicitudMovimiento.id}) }}" title="Editar">{{solicitudMovimiento.fechaHoraRequerido | date('d/m/Y H:i')}}</a></td>
								<td><a href="{{ path('solicitudmovimiento_show', {'id':solicitudMovimiento.id}) }}" title="Editar">{{solicitudMovimiento.estadoNombre}}</a></td>
								<td width="20">
									<ul>
										<li>
											<a class="list_edit_btn" href="{{ path('solicitudmovimiento_show', {'id':solicitudMovimiento.id}) }}" title="Editar"></a>
										</li>
									</ul>
								</td>
							</tr>
							
							{% else %}
							<tr class="trColor1">
								<td colspan="0">
									<span class="txt16">No existen registros.</span>
								</td>
							</tr>
						{% endfor %}
						</tbody>
					</table>
				
							
			</div>
	</div>
	
	<div class="fix"></div>
{% endblock otros %}

{% block javascript_extra %}
	<script type="text/javascript" src="{{ asset('bundles/decoyesoobra/js/obra.js') }}" /></script>
{% endblock javascript_extra %}
